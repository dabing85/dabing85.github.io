{
    "version": "https://jsonfeed.org/version/1",
    "title": "null â€¢ All posts by \"https\" tag",
    "description": "æ¬¢è¿æ¥åˆ°å¤§å†°çš„ç¬”è®°ç©ºé—´~è¿™é‡Œä¸»è¦ä¼šè®°å½•ç¼–ç¨‹å­¦ä¹ ç¬”è®°ğŸŒ¸",
    "home_page_url": "https://blog.dabing.cool",
    "items": [
        {
            "id": "https://blog.dabing.cool/hexo/ssl/",
            "url": "https://blog.dabing.cool/hexo/ssl/",
            "title": "æœåŠ¡å™¨é…ç½®hexoå¼€å¯httpsï¼ˆsslè¯ä¹¦ï¼‰",
            "date_published": "2022-09-05T13:46:25.000Z",
            "content_html": "<p>ä½œè€…ï¼šdabingï¼ˆç‹ç”œç”œï¼‰</p>\n<p>å‚åŠ äº†åˆæ‹äº‘çš„è”ç›Ÿæ´»åŠ¨ï¼Œç™½å«–çš„ 10G çš„å­˜å‚¨ç©ºé—´ + 15GB çš„ CDN å…è´¹æµé‡ï¼Œæœ‰åŸŸåå¹¶ä¸”å·²ç»å¤‡æ¡ˆçš„æœ‰ç½‘ç«™çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥å»è¯•è¯•ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudXB5dW4uY29tL2xlYWd1ZQ==\">åˆæ‹äº‘è”ç›Ÿ - å¼€å‘è€…å¸®åŠ©è®¡åˆ’ï¼Œä¸ºå¼€å‘è€…åŠ é€Ÿ - åˆæ‹äº‘ (upyun.com)</span></p>\n<p><img data-src=\"http://image.dabing.cool/image/image-20220909084820511.png\" alt=\"image-20220909084820511\"></p>\n<p>é¡ºä¾¿ç”³è¯·äº†å…è´¹çš„ SSL è¯ä¹¦ï¼Œä½ çœ‹æˆ‘çš„å°ç«™ç°åœ¨æ˜¯ https å¼€å¤´çš„å•¦ï½ï½ï½</p>\n<p>ä¸€äº›ç”³é¢†è¿‡ç¨‹å¯ä»¥å‚è€ƒæˆ‘å‹é“¾ä¸­ä½™ç™½çš„åšå®¢ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudmlweXViYWkudG9wL3Bvc3QvYTQyYmVmYzYuaHRtbA==\">hexo çš„ä¼˜åŒ–ï¼šåˆæ‹äº‘ cdn åŠ é€Ÿ | ä½™ç™½ã®å°å±‹ (vipyubai.top)</span></p>\n<p>æˆ‘è¿™é‡Œåªæ˜¯è®°å½•ä¸€ä¸‹æˆ‘åœ¨æœåŠ¡å™¨ nginx å¦‚ä½•å¼€å¯ httpsï¼ˆSSL è¯ä¹¦ï¼‰</p>\n<h1 id=\"è·å–è¯ä¹¦\"><a class=\"markdownIt-Anchor\" href=\"#è·å–è¯ä¹¦\">#</a> è·å–è¯ä¹¦</h1>\n<p>å…ˆä»ä½ çš„åˆæ‹äº‘å¹³å°æŠŠå·²ç»é¢å‘äº†çš„è¯ä¹¦ä¸‹è½½ä¸‹æ¥ã€‚</p>\n<p>æˆ‘çš„ä¸‹è½½ä¸‹æ¥æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>\n<ul>\n<li>blog.dabing.cool.crt</li>\n<li>blog.dabing.cool.key</li>\n</ul>\n<p><img data-src=\"http://image.dabing.cool/image/image-20220909085441872.png\" alt=\"image-20220909085441872\"></p>\n<h1 id=\"æœåŠ¡å™¨é…ç½®nginx\"><a class=\"markdownIt-Anchor\" href=\"#æœåŠ¡å™¨é…ç½®nginx\">#</a> æœåŠ¡å™¨é…ç½® nginx</h1>\n<p>æˆ‘å‚è€ƒçš„è¿™ç¯‡æ–‡ç« ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC84NTA0MDYyNQ==\">Nginx é…ç½® SSL è¯ä¹¦</span></p>\n<p>æ‡’å¾—å†å†™ä¸€æ¬¡äº†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æˆ‘çš„é…ç½®</p>\n<h2 id=\"1-å…ˆæ£€æµ‹ä¸€ä¸‹è‡ªå·±çš„ç¯å¢ƒæ˜¯å¦å…è®¸\"><a class=\"markdownIt-Anchor\" href=\"#1-å…ˆæ£€æµ‹ä¸€ä¸‹è‡ªå·±çš„ç¯å¢ƒæ˜¯å¦å…è®¸\">#</a> 1. å…ˆæ£€æµ‹ä¸€ä¸‹è‡ªå·±çš„ç¯å¢ƒæ˜¯å¦å…è®¸ï¼š</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nginx <span class=\"token parameter variable\">-V</span></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™ä¸ª <code>--with-stream_ssl_module</code>  é‚£å°± ok</p>\n<p><img data-src=\"http://image.dabing.cool/image/image-20220909090711795.png\" alt=\"image-20220909090711795\"></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>openssl version</pre></td></tr></table></figure><p><img data-src=\"http://image.dabing.cool/image/image-20220909090843974.png\" alt=\"image-20220909090843974\"></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token function\">open</span>  <span class=\"token comment\"># æŸ¥è¯¢æ˜¯å¦å®‰è£… openssl</span></pre></td></tr></table></figure><p><img data-src=\"http://image.dabing.cool/image/image-20220909091040936.png\" alt=\"image-20220909091040936\"></p>\n<h2 id=\"2-confdçš„æ–‡ä»¶é…ç½®\"><a class=\"markdownIt-Anchor\" href=\"#2-confdçš„æ–‡ä»¶é…ç½®\">#</a> 2. conf.d/ çš„æ–‡ä»¶é…ç½®</h2>\n<p>å†ä½ çš„ etc/nginx/conf.d/ æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘çš„æ˜¯ <code>etc/nginx/conf.d/blog.conf</code></p>\n<p>æˆ‘çš„é…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p>\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š# å¦‚æœä½ çš„ ssl on çˆ†çº¢æˆ–è€…ä½ çš„ nginx æ˜¯ 1.15.x ä»¥ä¸Šç‰ˆæœ¬çš„è¯</p>\n<p>å¾—å°† <code>listen 443</code>  å’Œ <code>ssl on</code>  æ”¹æˆ <code>listen 443 ssl </code></p>\n<figure class=\"highlight nginx\"><figcaption data-lang=\"nginx\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">listen</span> <span class=\"token number\">443</span> ssl</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\"># å¦‚æœä½ çš„ ssl on çˆ†çº¢æˆ–è€…ä½ çš„ nginx æ˜¯ 1.15 ä»¥ä¸Šç‰ˆæœ¬çš„è¯ï¼Œ</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">server_name</span> blog.dabing.cool</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\"># å¡«å†™ç»‘å®šè¯ä¹¦çš„åŸŸå</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">ssl_certificate</span> /etc/nginx/cert/blog.dabing.cool.crt</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">ssl_certificate_key</span> /etc/nginx/cert/blog.dabing.cool.key</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">ssl_session_timeout</span> <span class=\"token number\">5m</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">ssl_protocols</span> TLSv1 TLSv1.1 TLSv1.2</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\"># æŒ‰ç…§è¿™ä¸ªåè®®é…ç½®</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\"># æŒ‰ç…§è¿™ä¸ªå¥—ä»¶é…ç½®</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">ssl_prefer_server_ciphers</span> <span class=\"token boolean\">on</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">location</span> /</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token directive\"><span class=\"token keyword\">root</span> /var/www/hexo</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\"># ç«™ç‚¹ç›®å½•</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token directive\"><span class=\"token keyword\">index</span>  index.html index.htm</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">server</span></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">listen</span>       <span class=\"token number\">80</span> default_server</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">listen</span>       [::]:80 default_server</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">server_name</span>  xxx.xx.xxx.xx</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># è¿™é‡Œå¯ä»¥å¡«ä½ çš„ä¸»æœº ip</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">root</span>         /var/www/hexo</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">rewrite</span> ^(.*) https://blog.dabing.cool</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\"># æ·»åŠ çš„è¯­å¥</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç„¶åé‡å¯ nginx å³å¯ï¼š</p>\n<p><code>systemctl restart nginx.service</code>  é‡å¯</p>\n<p>å¦‚æœä½ é‡åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Job <span class=\"token keyword\">for</span> nginx.service failed because the control process exited with error code. See <span class=\"token string\">\"systemctl status nginx.service\"</span> and <span class=\"token string\">\"journalctl -xe\"</span> <span class=\"token keyword\">for</span> details.</pre></td></tr></table></figure><p>æœ‰å¯èƒ½æ˜¯ä½ çš„ 80 ç«¯å£æˆ–è€… 443 ç«¯å£è¢«å ç”¨ç€ï¼Œå‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ps</span> -ef<span class=\"token operator\">|</span><span class=\"token function\">grep</span> nginx</pre></td></tr></table></figure><p>æœ‰å°±æŠŠè¿›ç¨‹æ€æ‰ï¼Œå†é‡å¯å³å¯ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">kill</span> <span class=\"token parameter variable\">-9</span> pid</pre></td></tr></table></figure><p>å†è®¿é—®çœ‹çœ‹ï¼š<a href=\"https://blog.dabing.cool/\">https://blog.dabing.cool/</a></p>\n<p><img data-src=\"http://image.dabing.cool/image/image-20220909100723165.png\" alt=\"image-20220909100723165\"></p>\n",
            "tags": [
                "Hexo",
                "ssl",
                "https"
            ]
        }
    ]
}